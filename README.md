# Looper
Inspired by the early work of Carl Stone, the Looper edits, pitch shifts, time stretches, and adds effects to WAV samples.  The interface is built with [p5.js](https://p5js.org/), HTML, and CSS, and the audio is generated with [Web Csound](https://csound.com/docs/web/). You can play a live version of this program at https://jasonhallen.com/web/looper/. The Looper isn't optimized for mobile so is best experienced on a computer.

## Core Components
* **setupCsound.js** - Initializes Web Csound object, loads WAV files into WebAssembly file system, and calculates peaks of WAV files for visualizing waveforms.
* **sketch.js** - Contains the core elements of the graphical interface.  Defines classes and methods for generating and deleting tracks, creates interactive elements in the DOM and on the HTML5 canvas, handles animation, and passes data to and receives data from the Web Csound object.
* **looper.csd** - Used by Web Csound to render all audio in the browser. Receives control input from `sketch.js`. `mincer` is the core Csound opcode that plays the WAV files and alters their speed and pitch. Csound handles additional effects such as delay, reverb, and panning.
* **styles.css** - Adds styling to the HTML elements generated by `sketch.js`.
* **index.html** - Dummy HTML file that only exists to load the core JavaScript files.

## Dependencies
This program relies on p5.js for generating the graphical interface and managing all user interaction and on Web Csound for rendering all audio. You can either host the p5.js and Web Csound code in your server alongside the program code, or you can have the user's browser pull down and load the code from the p5.js and Web Csound servers when it loads the program.

## Tasks
* Easy
    * Use `directory` to auto-load WAV files
    * Preload play button image
    * Mixer volume control with arrow keys
* Moderate
    * Why is time lock different across tracks?
    * Improve delay effect
    * Record button send to `fout`
    * Track volume control with keyboard
    * Iron out drum loop timing
    * Fix mixer position on right
    * Fade in duration
    * Tremolo
    * Decimator/bit crusher
* Hard
    * Audio buffer track that records current output and loops
    * Audio interface input (https://csound.com/docs/manual/inch.html)
    * Convert all DOM elements to canvas objects
    * Port to faster JS solution because p5.js is too slow
    * Use csound.node to work with native Csound instead of Web Csound
    * Presets